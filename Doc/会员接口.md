# 会员接口

# 目录

- [会员数据接口](#会员数据接口)
 - [用户注册](#用户注册)
 - [编辑会员信息](#编辑会员信息)
 - [获取会员信息](#获取会员信息)
 - [MemberInfo类型说明](#memberinfo类型说明)
 - [获取会员列表](#获取会员列表)
- [收藏](#收藏)
 - [收藏视频/话题/发言](#收藏视频/话题/发言)
 - [删除收藏](#删除收藏)
 - [获取收藏列表](#获取收藏列表)
 - [MDE_Favorites类型说明](#mde_favorites类型说明)
- [私信](#私信)
 - [写私信](#写私信)
 - [删除私信](#删除私信)
 - [发送私信](#发送私信)
 - [获取私信列表](#获取私信列表)
 - [MDE_Message类型说明](#mde_message类型说明)

# 会员数据接口

## 会员

### 用户注册

POST /members

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|new Session|
||||
|string|Session.LoginName|手机号|
|string|Session.UserName|昵称|
|string|Session.Signature|MD5(Mobile + SmsCode + MD5(password))|
|string|Session.MachineId|设备ID的MD5值|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string| smsCode |短信验证码|
|string| password |密码的MD5值|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(Session)：返回值是一个完成登录的Session对象，需要保存在本地，用于需要使用Session来签名的接口验证。  
[回目录](#目录)

### 编辑会员信息

PUT /members/{id}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session（返回的Session）|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|MDG_Member|member|new MDG_Member|
||||
|string|Portrait|头像Url|
|string|Signature|会员个性签名|
|string|Country|所在国家（尚未使用）|
|string|State|所在省/直辖市（尚未使用）|
|string|City|所在市/地区（尚未使用）|
|string|County|所在县/市（尚未使用）|
|string|Street|街道及详细住址（尚未使用）|
|string|ZipCode|邮政编码（尚未使用）|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。  
[回目录](#目录)


### 获取会员信息

GET /members/{id}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session（返回的Session）|

- 参数：Url

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|id|Session.UserId|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(MemberInfo)：会员信息数据  
[回目录](#目录)

#### MemberInfo类型说明

|DataTypes|Attribute |Description|
| ------------ | ------------ | ------------ |
|Guid|ID|会员ID(唯一标识)|
|string|Name|昵称|
|string|Alias|别名（账号）|
|string|Portrait|头像Url|
|string|Signature|会员个性签名|
|int|Integral|会员当前积分|
|int|Beans|会员当前可用金豆数量|
|int|Unread|会员当前未读私信数量|
[回目录](#目录)

### 获取会员列表

GET /members/search?name={name}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session（返回的Session）|

- 参数：Url

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|name|昵称关键词（包含）|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(MemberInfo集合)：会员信息数据集合  
[回目录](#目录)

## 收藏

### 收藏视频/话题/发言

POST /favorites

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|MDE_Favorites|favorites|new MDE_Favorites|
||||
|int|Type|类型：1、群组；2、话题；3、发言；4、视频|
|Guid|ObjectId|要收藏的目标对象ID|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(Guid)：收藏记录ID  
[回目录](#目录)

### 删除收藏

DELETE favorites/{id}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|id|收藏记录ID|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。  
[回目录](#目录)

### 获取收藏列表

GET /favorites?type={type}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session（返回的Session）|

- 参数：Url

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|int|type|收藏类型：1、群组；2、话题；3、发言；4、视频|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(MDE_Favorites集合)：收藏数据集合  
[回目录](#目录)

#### MDE_Favorites类型说明

|DataTypes|Attribute |Description|
| ------------ | ------------ | ------------ |
|Guid|ID|收藏记录ID(唯一标识)|
|long|SN|自增序列|
|int|Type|收藏类型：1、群组；2、话题；3、发言；4、视频|
|Guid|ObjectId|收藏对象数据ID|
|Guid|CreatorUserId|记录创建用户ID|
|DateTime|CreateTime|记录创建时间|
[回目录](#目录)

## 私信

### 写私信

POST /messages

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|MDE_Message|message|new MDE_Message|
||||
|Guid|ReceiveUserId|通信对象（收信人）ID|
|string|Content|私信内容|
|DateTime|SendTime|发送时间|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(Guid)：私信记录ID  
[回目录](#目录)

### 删除私信

DELETE messages/{id}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|id|私信记录ID|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。  
[回目录](#目录)

### 发送私信

PUT /messages/{id}/send

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session|

- 参数：Data

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|id|私信记录ID|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。  
[回目录](#目录)

### 获取私信列表

GET messages?id={id}

- 签名：

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|Base64|Authorization|Session（返回的Session）|

- 参数：Url

|Class|Parameter|Value|
| ------------ | ------------ | ------------ |
|string|id|通信对象会员ID|

- 返回值：

JsonResult：返回值是一个JsonResult对象，指示接口调用成功或失败以及错误信息。

Data(MDE_Message集合)：收藏数据集合  
[回目录](#目录)

#### MDE_Message类型说明

|DataTypes|Attribute |Description|
| ------------ | ------------ | ------------ |
|Guid|ID|私信记录ID(唯一标识)|
|long|SN|自增序列|
|Guid|ReceiveUserId|通信对象（收信人）ID|
|string|Content|私信内容|
|DateTime|SendTime|发送时间|
|bool|HaveRead|是否已读|
|Guid|CreatorUserId|记录创建用户（发信人）ID|
|DateTime|CreateTime|记录创建时间|
[回目录](#目录)